# ğŸ›¡ï¸ æ–°åŠŸèƒ½ä¿æŠ¤åˆå¹¶æŒ‡å—

## ğŸ”¥ ä½ çš„é‡è¦æ–°åŠŸèƒ½

é€šè¿‡åˆ†æä½ çš„ `qa-platform` é¡¹ç›®ï¼Œå‘ç°äº†ä»¥ä¸‹**é‡è¦æ–°åŠŸèƒ½**ï¼š

### ğŸ“§ é‚®ç®±éªŒè¯ç ç³»ç»Ÿ
- **æ¨¡å‹**: `EmailCaptcha` - å­˜å‚¨éªŒè¯ç å’Œè¿‡æœŸæ—¶é—´
- **åŠŸèƒ½**: æ³¨å†Œæ—¶å‘é€6ä½éªŒè¯ç ï¼Œ5åˆ†é’Ÿæœ‰æ•ˆæœŸ
- **è·¯ç”±**: `/send_captcha` - å‘é€éªŒè¯ç API

### â“ QAé—®ç­”ç³»ç»Ÿ 
- **æ¨¡å‹**: `Question` - é—®é¢˜æ¨¡å‹ï¼Œæ”¯æŒæœ€ä½³ç­”æ¡ˆ
- **æ¨¡å‹**: `Answer` - å›ç­”æ¨¡å‹ï¼Œæ”¯æŒæŠ•ç¥¨
- **æ¨¡å‹**: `AnswerVote` - æŠ•ç¥¨ç³»ç»Ÿ
- **åŠŸèƒ½**: å®Œæ•´çš„è¯¾ç¨‹é—®ç­”åŠŸèƒ½

### ğŸ“„ åˆ†é¡µåŠŸèƒ½
- **é—®é¢˜åˆ†é¡µ**: æ¯é¡µ10ä¸ªé—®é¢˜ (`per_page=10`)
- **ç­”æ¡ˆåˆ†é¡µ**: æ¯é¡µ5ä¸ªç­”æ¡ˆ (`per_page=5`) 
- **æ™ºèƒ½æ’åº**: æœ€ä½³ç­”æ¡ˆç½®é¡¶ï¼ŒæŒ‰æŠ•ç¥¨æ•°æ’åº

### ğŸ—³ï¸ æŠ•ç¥¨åŠŸèƒ½
- **ç‚¹èµ/ç‚¹è¸©**: æ”¯æŒå¯¹ç­”æ¡ˆæŠ•ç¥¨
- **é˜²é‡å¤æŠ•ç¥¨**: æ¯ç”¨æˆ·æ¯ç­”æ¡ˆåªèƒ½æŠ•ç¥¨ä¸€æ¬¡
- **å®æ—¶ç»Ÿè®¡**: åŠ¨æ€æ›´æ–°æŠ•ç¥¨æ•°

## âš ï¸ åˆå¹¶é£é™©

**ç›´æ¥Gitåˆå¹¶å¯èƒ½å¯¼è‡´**ï¼š
- âŒ `EmailCaptcha` æ¨¡å‹ä¸¢å¤±
- âŒ QAåˆ†é¡µåŠŸèƒ½è¢«è¦†ç›–
- âŒ æŠ•ç¥¨ç³»ç»Ÿæ¶ˆå¤±
- âŒ æ•°æ®åº“è¿ç§»å†²çª

## ğŸ›¡ï¸ å®‰å…¨åˆå¹¶æ–¹æ¡ˆ

### 1ï¸âƒ£ ä½¿ç”¨ä¿æŠ¤è„šæœ¬ï¼ˆæ¨èï¼‰

```bash
cd /Users/dududu/Desktop/QA_Platform/qa-platform
./protect_features_merge.sh
```

**è„šæœ¬ç‰¹ç‚¹**ï¼š
- âœ… è‡ªåŠ¨å¤‡ä»½æ–°åŠŸèƒ½
- âœ… æ™ºèƒ½è¯†åˆ«å†²çª
- âœ… ä¼˜å…ˆä¿æŠ¤ä½ çš„æ–°åŠŸèƒ½
- âœ… æä¾›äº¤äº’å¼å†²çªè§£å†³

### 2ï¸âƒ£ æ‰‹åŠ¨ä¿æŠ¤åˆå¹¶

å¦‚æœä½ æƒ³æ‰‹åŠ¨æ§åˆ¶ï¼š

```bash
# 1. å¤‡ä»½æ–°åŠŸèƒ½
cp -r qa-platform qa-platform-backup-$(date +%Y%m%d)

# 2. åˆå§‹åŒ–Git
cd qa-platform
git init
git add .
git commit -m "ä¿å­˜æ–°åŠŸèƒ½ï¼šé‚®ç®±éªŒè¯ç +QAåˆ†é¡µ+æŠ•ç¥¨ç³»ç»Ÿ"

# 3. æ·»åŠ å›¢é˜Ÿä»“åº“
git remote add team https://github.com/your-team/repo.git
git fetch team

# 4. åˆ›å»ºä¿æŠ¤åˆ†æ”¯
git checkout -b merge-with-protection

# 5. ä½¿ç”¨ä¿æŠ¤ç­–ç•¥åˆå¹¶
git merge team/main -X ours
```

**`-X ours` å‚æ•°è¯´æ˜**ï¼šä¼˜å…ˆä¿ç•™ä½ çš„ç‰ˆæœ¬ï¼Œè¿™æ ·ä½ çš„æ–°åŠŸèƒ½ä¸ä¼šè¢«è¦†ç›–ã€‚

### 3ï¸âƒ£ åˆ†æ­¥éª¤åˆå¹¶

å¯¹äºå¤æ‚é¡¹ç›®ï¼Œå»ºè®®åˆ†æ­¥åˆå¹¶ï¼š

```bash
# Step 1: ä»…åˆå¹¶éå…³é”®æ–‡ä»¶
git checkout team/main -- README.md requirements.txt

# Step 2: æ‰‹åŠ¨åˆå¹¶å…³é”®æ–‡ä»¶
# æ£€æŸ¥å·®å¼‚ä½†ä¸è‡ªåŠ¨åˆå¹¶
git diff team/main -- app/models.py

# Step 3: ä¿æŠ¤æ€§åˆå¹¶
git merge team/main -X ours
```

## ğŸ” åˆå¹¶åéªŒè¯

åˆå¹¶å®Œæˆåï¼Œæ£€æŸ¥å…³é”®åŠŸèƒ½ï¼š

### æ£€æŸ¥æ¨¡å‹å®Œæ•´æ€§
```bash
grep -n "class EmailCaptcha" app/models.py
grep -n "class Question" app/models.py
grep -n "class Answer" app/models.py
grep -n "class AnswerVote" app/models.py
```

### æ£€æŸ¥è·¯ç”±åŠŸèƒ½
```bash
grep -n "send_captcha" app/routes/auth.py
grep -n "course_qa_list" app/routes/qa.py
grep -n "paginate" app/routes/qa.py
```

### è¿è¡Œæµ‹è¯•
```bash
python3 run.py
# è®¿é—® http://localhost:5003
# æµ‹è¯•æ³¨å†Œé‚®ç®±éªŒè¯ç 
# æµ‹è¯•QAåŠŸèƒ½å’Œåˆ†é¡µ
```

## ğŸš¨ å¦‚æœåŠŸèƒ½ä¸¢å¤±äº†

### å¿«é€Ÿæ¢å¤
```bash
# ä»å¤‡ä»½æ¢å¤
BACKUP_DIR=$(cat .feature_backup_path)
cp "$BACKUP_DIR/app/models.py" app/
cp "$BACKUP_DIR/app/routes/qa.py" app/routes/
cp "$BACKUP_DIR/app/routes/auth.py" app/routes/
cp -r "$BACKUP_DIR/templates/qa/" templates/
```

### é‡æ–°æ•°æ®åº“è¿ç§»
```bash
# å¦‚æœæ¨¡å‹æœ‰å˜åŒ–ï¼Œé‡æ–°è¿ç§»
flask db migrate -m "æ¢å¤æ–°åŠŸèƒ½æ¨¡å‹"
flask db upgrade
```

## ğŸ’¡ æœ€ä½³å®è·µ

1. **æ€»æ˜¯å…ˆå¤‡ä»½** - ä¿æŠ¤ä½ çš„å·¥ä½œæˆæœ
2. **ä½¿ç”¨ä¿æŠ¤ç­–ç•¥** - `-X ours` ä¼˜å…ˆä¿ç•™ä½ çš„æ›´æ”¹
3. **åˆ†æ‰¹åˆå¹¶** - å…ˆåˆå¹¶ç®€å•æ–‡ä»¶ï¼Œå†å¤„ç†å¤æ‚å†²çª
4. **é€æ­¥éªŒè¯** - æ¯ä¸ªæ­¥éª¤åéƒ½æµ‹è¯•åŠŸèƒ½
5. **ä¿ç•™è®°å½•** - è®°å½•åˆå¹¶è¿‡ç¨‹ï¼Œä¾¿äºå›æ»š

## ğŸ¯ å¿«é€Ÿå¼€å§‹

ç›´æ¥è¿è¡Œä¿æŠ¤è„šæœ¬ï¼š
```bash
cd /Users/dududu/Desktop/QA_Platform/qa-platform
./protect_features_merge.sh
```

é€‰æ‹© "ä¿æŠ¤ä¼˜å…ˆåˆå¹¶"ï¼Œè¾“å…¥å›¢é˜Ÿä»“åº“ä¿¡æ¯ï¼Œè„šæœ¬ä¼šè‡ªåŠ¨ä¿æŠ¤ä½ çš„æ–°åŠŸèƒ½ï¼

---

**è®°ä½**ï¼šä½ çš„æ–°åŠŸèƒ½å¾ˆæ£’ï¼Œå€¼å¾—å¥½å¥½ä¿æŠ¤ï¼ ğŸ›¡ï¸âœ¨
